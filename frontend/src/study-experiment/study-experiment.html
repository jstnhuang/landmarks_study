<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/app-route/app-route.html">
<link rel="import" href="../../bower_components/ros-rviz/ros-rviz.html">

<dom-module id="study-experiment">
  <template>
    <style>
      :host {
        display: block;
        height: 100%;
      }
      ros-rviz {
        float: left;
        height: 100%;
        width: 80%;
      }
      div.buttons {
        float: left;
        height: 100%;
        width: 20%;
      }
    </style>
    <app-route
      route="{{route}}"
      pattern="/:user/:taskNum"
      data="{{routeData}}"
    ></app-route>
    <ros-rviz id="rviz" ros="{{ros}}"></ros-rviz>
    <div class="buttons">
      Buttons
    </div>
  </template>

  <script>
    Polymer({

      is: 'study-experiment',

      properties: {
        ros: Object,
        route: Object,
      },

      attached: function() {
        var config =  {
          globalOptions: {
            fixedFrame: '/base_link',
          },
          displays: [
            {
              type: 'grid',
              name: 'Grid',
              options: {
                cellSize: 1,
                color: '#cccccc',
                numCells: 20,
              },
              isShown: true,
            }, {
              type: 'interactiveMarkers',
              name: 'ROI selector',
              options: {
                topic: '/roi',
              },
              isShown: true,
            }, {
              type: 'pointCloud2',
              name: 'Scene',
              options: {
                size: 0.01,
                topic: '/scene',
              },
              isShown: true,
            }, {
              type: 'pointCloud2',
              name: 'Alignment',
              options: {
                size: 0.01,
                topic: '/alignment',
              },
              isShown: true,
            }
          ],
          sidebarOpened: false,
        };
        this.$.rviz.loadConfig(config);
      },
    });
  </script>
</dom-module>
